@page "/CustHome"
@using Project_v2.Data
@using System.Collections.Generic
@inject StoreService  storeService

<p>CustHome</p>
<div class="row">
    <div class="col-6">
       @*WORK ON DISPLAYING AN INVENTORY OF ALL PRODUCTS!*@
    </div>
    <div class="col-6">
        <CustomerCart customer=@customer currentProducts=@currentProducts onChanged="onChanged" />
    </div>
</div>
}
@code {
    public StoreService.Customer selectedCustomer = null;
    List<StoreService.Distributor> distributors = null;
    List<StoreService.Product> currentProducts = null;

    int selectedScreen = 0;

    protected override async Task OnInitializedAsync()
    {
        distributors = await storeService.GetDistributors();

    }

    void SelectScreen(int screenNumber)
    {
        if (screenNumber == 0)
        {
            selectedDistributor = null;
        }

        selectedScreen = screenNumber;
    }

    async Task SelectDistributor(StoreService.Distributor d)
    {
        selectedDistributor = d;
        currentProducts = await storeService.GetDistributorsProducts(selectedDistributor.id);
    }

    async Task Refresh()
    {
        await SelectDistributor(selectedDistributor);
        StateHasChanged();
    }
}
